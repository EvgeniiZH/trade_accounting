<div class="card border-0 shadow-sm flex-grow-1 d-flex flex-column">
    <style>
        /* Минимальный набор стилей - используем более специфичный селектор */
        #create-calculation-wrapper #calculation-table {
            table-layout: auto !important;
            width: 100% !important;
            overflow: visible !important;
        }
        #create-calculation-wrapper #calculation-table th:nth-child(1),
        #create-calculation-wrapper #calculation-table td:nth-child(1) {
            width: auto !important;
            text-align: center !important;
        }
        #create-calculation-wrapper #calculation-table th:nth-child(2),
        #create-calculation-wrapper #calculation-table td:nth-child(2) {
            width: auto !important;
            white-space: normal !important;
            overflow-wrap: anywhere !important;
            text-align: left !important;
        }
        #create-calculation-wrapper #calculation-table th:nth-child(3),
        #create-calculation-wrapper #calculation-table td:nth-child(3) {
            width: auto !important;
            text-align: right !important;
        }
        #create-calculation-wrapper #calculation-table th:nth-child(4),
        #create-calculation-wrapper #calculation-table td:nth-child(4) {
            width: auto !important;
            text-align: center !important;
        }
        #create-calculation-wrapper #calculation-table th:nth-child(5),
        #create-calculation-wrapper #calculation-table td:nth-child(5) {
            width: auto !important;
            text-align: center !important;
        }
    </style>
    <div class="card-body p-3 d-flex flex-column flex-grow-1">
        <div class="table-scroll border rounded flex-grow-1 position-relative">
            <!-- Loader -->
            <div class="table-loader">
                <div class="spinner"></div>
            </div>

            <table class="table table-bordered table-hover mb-0" id="calculation-table">
        <thead class="position-sticky top-0 z-1">
        <tr>
            <th>#</th>
            <th>
                <a href="?sort_by=name&direction={% if sort_by == 'name' and direction == 'asc' %}desc{% else %}asc{% endif %}" 
                   class="sort-link {% if sort_by == 'name' %}{% if direction == 'asc' %}asc{% else %}desc{% endif %}{% endif %}"
                   style="color: white; text-decoration: none;">
                    Товар
                </a>
            </th>
            <th>
                <a href="?sort_by=price&direction={% if sort_by == 'price' and direction == 'asc' %}desc{% else %}asc{% endif %}" 
                   class="sort-link {% if sort_by == 'price' %}{% if direction == 'asc' %}asc{% else %}desc{% endif %}{% endif %}"
                   style="color: white; text-decoration: none;">
                    Цена
                </a>
            </th>
            <th style="width: 110px;">Кол-во</th>
            <th class="text-center">Выбрать</th>
        </tr>
        </thead>
        <tbody>
        {% include 'trades/includes/create_calculation_rows.html' %}
        </tbody>
            </table>
        </div>
    </div>

    <!-- Пагинация внизу карточки -->
    <div class="card-footer bg-white border-top-0">
        {% include 'includes/pagination.html' %}
    </div>
</div>
