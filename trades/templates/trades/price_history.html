{% extends 'base.html' %}
{% load static %}

{% block title %}–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω{% endblock %}

{% block content %}
    <div class="container-fluid page-wrapper">
        <div class="page-header d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3">
            <h2 class="mb-0 text-primary">üìä –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω</h2>
        </div>

        <div class="page-content">
        <div class="input-group" data-table-search data-table-id="price-history-table" data-cell-selector=".search-target">
            <span class="input-group-text">üîç</span>
            <input type="text" class="form-control" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Ç–æ–≤–∞—Ä—É –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é..." data-role="search-input" data-focus-hotkey="/">
            <button type="button" class="btn btn-outline-secondary" data-role="clear-search">–û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>

        <div class="table-scroll border rounded shadow-sm">
            <table class="table table-bordered table-hover mb-0" id="price-history-table">
                <thead class="table-light">
                <tr>
                    <th>–¢–æ–≤–∞—Ä</th>
                    <th class="text-end">–°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞</th>
                    <th class="text-end">–ù–æ–≤–∞—è —Ü–µ–Ω–∞</th>
                    <th class="text-center">–î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è</th>
                    <th class="text-center">–ò–∑–º–µ–Ω–∏–ª</th>
                </tr>
                </thead>
                <tbody>
                {% for history in page_obj %}
                    <tr>
                        <td class="search-target">{{ history.item.name }}</td>
                        <td class="text-end">{{ history.old_price|floatformat:2 }} ‚ÇΩ</td>
                        <td class="text-end fw-bold text-success">{{ history.new_price|floatformat:2 }} ‚ÇΩ</td>
                        <td class="text-center">{{ history.changed_at|date:"d.m.Y H:i" }}</td>
                        <td class="text-center search-target">
                            {% if history.changed_by %}
                                {{ history.changed_by.username }}
                            {% else %}
                                –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ
                            {% endif %}
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="5" class="text-center text-muted">–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="page-footer">
            {% include 'includes/pagination.html' %}
        </div>
        </div>
    </div>
    <script src="{% static 'js/table_search.js' %}" defer></script>
{% endblock %}
